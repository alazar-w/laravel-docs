<!DOCTYPE html>
<!-- saved from url=(0035)https://laravel.com/docs/6.0/queues -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Queues - Laravel - The PHP Framework For Web Artisans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://laravel.com/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://laravel.com/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://laravel.com/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="https://laravel.com/img/favicon/site.webmanifest">
    <link rel="mask-icon" href="https://laravel.com/img/favicon/safari-pinned-tab.svg" color="#ff2d20">
    <link rel="shortcut icon" href="https://laravel.com/img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#ff2d20">
    <meta name="msapplication-config" content="/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Load fonts -->
    <link rel="stylesheet" href="./11-Queues_files/ins2wgm.css">

    <!-- Load styles -->
    <link rel="stylesheet" type="text/css" href="./11-Queues_files/app.css">

    <!-- Load JS -->
    <script src="./11-Queues_files/ga.js.download"></script><script src="./11-Queues_files/jquery.min.js.download"></script>

<style type="text/css">:root topadblock, :root input[onclick^="window.open('http://www.FriendlyDuck.com/"], :root img[alt^="Fuckbook"], :root iframe[src^="http://static.mozo.com.au/strips/"], :root iframe[src^="http://cdn2.adexprt.com/"], :root iframe[id^="google_ads_iframe"], :root header#hdr + #main > div[data-hveid], :root div[id^="zergnet-widget"], :root div[id^="mainads"], :root div[id^="dmRosAdWrapper"], :root a[href^="http://at.atwola.com/"], :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root div[id^="div-ads-"], :root a[data-obtrack^="http://paid.outbrain.com/network/redir?"], :root a[href^="http://www1.clickdownloader.com/"], :root div[id^="cns_ads_"], :root #\5f _admvnlb_modal_container, :root div[id^="adspot-"], :root a[href^="https://trust.zone/go/r.php?RID="], :root div[id^="tms-ad-dfp-"], :root input[onclick^="window.open('http://www.friendlyduck.com/"], :root div[id^="ads300_250-widget"], :root div[id^="ads250_250-widget"], :root div[id^="adrotate_widgets-"], :root div[id^="adfox_"], :root div[id^="ad_script_"], :root #content > #right > .dose > .dosesingle, :root div[id^="ad_bigbox_"], :root div[id^="ad-server-"], :root div[id^="acm-ad-tag-"], :root div[id^="ADV-SLOT-"], :root div[data-native_ad], :root a[href^=" http://n47adshostnet.com/"], :root div[data-id^="CarouselPLA-"] > .kzwEHf, :root div[class^="proadszone-"], :root div[class^="pane-google-admanager-"], :root a[href^="http://adultgames.xxx/"], :root a[href^="http://semi-cod.com/clicks/"], :root div[class^="index_displayAd_"], :root a[href^="http://www.affbuzzads.com/affiliate/"], :root div[class^="index_adBeforeContent_"], :root div[class^="index_adAfterContent_"], :root div[class^="block-openx-"], :root div[class^="ads-partner-"], :root div[class^="ad_position_"], :root div[class^="ad_border_"], :root a[href^="http://adprovider.adlure.net/"], :root div[class^="Ad__container"], :root div[id^="div-adtech-ad-"], :root div[class*="_AdInArticle_"], :root div > [class][onclick*=".updateAnalyticsEvents"], :root a[href^="http://internalredirect.site/"], :root bottomadblock, :root a[href^="https://watchmygirlfriend.tv/"], :root a[href^="http://2pxg8bcf.top/"], :root aside[itemtype="https://schema.org/WPAdBlock"], :root a[href^="http://c.actiondesk.com/"], :root aside[id^="div-gpt-ad"], :root div[id^="ad-cid-"], :root a[href^="http://lp.ezdownloadpro.info/"], :root a[href^="http://uploaded.net/ref/"], :root aside[id^="advads_ad_widget-"], :root aside[id^="adrotate_widgets-"], :root a[target="_blank"][href^="http://api.taboola.com/"], :root a[style="display:block;width:300px;min-height:250px"][href^="http://li.cnet.com/click?"], :root a[onmousedown^="this.href='http://paid.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root a[href^="http://popup.taboola.com/"], :root a[href^="//adbit.co/?a=Advertise&"], :root a[onmousedown^="this.href='/wp-content/embed-ad-content/"], :root div[class^="AdhesionAd_"], :root div[class^="Ad__bigBox"], :root div[role="navigation"] + c-wiz > script + div > .kxhcC, :root a[onclick*="//m.economictimes.com/etmack/click.htm"], :root a[href^="https://www.what-sexdating.com/"], :root a[href^="https://www.travelzoo.com/oascampaignclick/"], :root a[href^="https://www.share-online.biz/affiliate/"], :root a[href^="https://www.securegfm.com/"], :root div[id^="advads_"], :root a[href^="https://www.moscarossa.biz/"], :root a[href^="http://www.usearchmedia.com/signup?"], :root a[onmousedown^="this.href='http://staffpicks.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root a[href^="https://www.incontri-matura.com/"], :root a[href^="https://www.goldenfrog.com/vyprvpn?offer_id="][href*="&aff_id="], :root .trc_related_container div[data-item-syndicated="true"], :root a[href^="https://www.firstload.com/affiliate/"], :root a[href^="https://www.camyou.com/?cam="][href*="&track="], :root a[href^="https://www.bebi.com"], :root a[href^="https://www.adskeeper.co.uk/"], :root a[href^="http://pan.adraccoon.com?"], :root div[id^="ad-gpt-"], :root a[href^="http://farm.plista.com/pets"], :root a[href^="https://windscribe.com/promo/"], :root a[href^="http://serve.williamhill.com/promoRedirect?"], :root a[href^="https://vodexor.us/"], :root a[href^="https://track.adform.net/"], :root a[href^="https://traffic.bannerator.com/"], :root a[href^="https://tracking.truthfinder.com/?a="], :root a[href^="https://www.adultempire.com/"][href*="?partner_id="], :root a[href^="https://track.healthtrader.com/"], :root a[href^="https://track.clickmoi.xyz/"], :root a[href^="https://track.afftck.com/"], :root a[href^="https://control.trafficfabrik.com/"], :root a[href^="https://track.52zxzh.com/"], :root div[class^="gemini-ad"], :root a[href^="http://pwrads.net/"], :root a[href^="//oardilin.com/"], :root a[href^="http://gca.sh/user/register?ref="], :root a[href^="https://torguard.net/aff.php"], :root a[href^="http://tour.affbuzzads.com/"], :root a[href^="https://tc.tradetracker.net/"], :root a[href^="https://t.mobtya.com/"], :root a[href^="https://t.grtyi.com/"], :root aside[id^="tn_ads_widget-"], :root a[href^="https://syndication.exoclick.com/splash.php?"], :root a[href^="http://click.guamwnvgashbkashawhgkhahshmashcas.pw/"], :root div[id^="YFBMSN"], :root div[id^="ad-div-"], :root a[href^="https://secure.eveonline.com/ft/?aid="], :root a[href^="https://rev.adsession.com/"], :root a[href^="https://retiremely.com/"], :root div[id^="yandex_ad"], :root a[href^="http://y1jxiqds7v.com/"], :root a[href^="https://www.pornhat.com/"][rel="nofollow"], :root AD-SLOT, :root a[href^="http://green.trafficinvest.com/"], :root a[href^="https://pubads.g.doubleclick.net/"], :root a[href^="https://prf.hn/click/"][href*="/adref:"], :root a[href^="https://mk-cdn.net/"], :root div[id^="proadszone-"], :root a[href^="https://mk-ads.com/"], :root a[href^="https://jmp.awempire.com/"], :root a[href^="https://members.linkifier.com/public/affiliateLanding?refCode="], :root a[href^="https://medleyads.com/"], :root div[id^="ads300_100-widget"], :root a[href^="https://click.plista.com/pets"], :root a[href^="https://lingthatsparleso.info/"], :root a[href^="https://laptop-updates.brave.com/download/"], :root a[href*=".approvallamp.club/"], :root a[href^="https://landing1.brazzersnetwork.com"], :root a[href^="https://land.rk.com/landing/"], :root .lads[width="100%"][style="background:#FFF8DD"], :root a[href^="https://land.brazzersnetwork.com/landing/"], :root a[href^="https://incisivetrk.cvtr.io/click?"], :root a[href^="https://iactrivago.ampxdirect.com/"], :root a[href^="https://googleads.g.doubleclick.net/pcs/click"], :root a[href^="http://cdn.adstract.com/"], :root a[href^="https://gogoman.me/"], :root a[href^="https://go.stripchat.com/"][href*="&campaignId="], :root a[href*=".inclk.com/"], :root a[href^="https://go.ad2up.com/"], :root a[href^="https://freeadult.games/"], :root a[href^="//nlkdom.com/"], :root a[onmousedown^="this.href='http://staffpicks.outbrain.com/network/redir?"][target="_blank"], :root a[href^="https://fonts.fontplace9.com/"], :root a[href^="http://clkmon.com/adServe/"], :root a[href^="https://flirtaescopa.com/"], :root a[href^="https://farm.plista.com/pets"], :root a[href^="https://evaporate.pw/"], :root a[href^="http://wxdownloadmanager.com/dl/"], :root div[class^="local-feed-banner-ads"], :root .GFYY1SVE2 > .GFYY1SVD2 > .GFYY1SVG5, :root a[href^="https://djtcollectorclub.org/"][href*="?affiliate_id="], :root a[href^="https://chaturbate.xyz/"], :root a[href^="https://chaturbate.jjgirls.com/"][href*="?tour="], :root a[href^="https://chaturbate.com/in/?tour="], :root a[href^="https://chaturbate.com/affiliates/"], :root a[href^="http://www.1clickdownloader.com/"], :root a[href^="https://www.googleadservices.com/pagead/aclk?"], :root a[href^="https://awentw.com/"], :root a[href^="https://servedbyadbutler.com/"], :root a[href^="http://dethao.com/"], :root a[href^="https://ads.ad4game.com/"], :root a[href^="https://betway.com/"][href*="&a="], :root a[href^="https://affiliates.bet-at-home.com/processing/"], :root a[href*="pussl3.com"], :root a[href^="https://adswick.com/"], :root ADS-RIGHT, :root .GKJYXHBF2 > .GKJYXHBE2 > .GKJYXHBH5, :root a[href^="https://adserver.adreactor.com/"], :root a[href^="https://refpaano.host/"], :root a[href^="http://data.linoleictanzaniatitanic.com/"], :root a[href^="https://adhealers.com/"], :root a[href^="https://adclick.g.doubleclick.net/"], :root a[href^="https://ad.doubleclick.net/"], :root a[href^="http://zevera.com/afi.html"], :root a[href^="http://go.oclaserver.com/"], :root a[href^="https://ad.atdmt.com/"], :root .trc_rbox .syndicatedItem, :root a[href^="https://aaucwbe.com/"], :root a[href^="https://a.adtng.com/"], :root a[href^="http://xtgem.com/click?"], :root a[href^="https://ads.trafficpoizon.com/"], :root a[href^="http://rekoverr.com/"], :root a[href^="https://chaturbate.com/in/?track="], :root a[href^="http://www.zergnet.com/i/"], :root a[href^="http://hyperies.info/"], :root a[href^="http://galleries.pinballpublishernetwork.com/"], :root a[href^="http://www.torntv-downloader.com/"], :root a[href^="http://www.tirerack.com/affiliates/"], :root a[href^="http://www.text-link-ads.com/"], :root a[href^="http://www.friendlyquacks.com/"], :root div[id^="div_openx_ad_"], :root a[href^="http://www.streamate.com/exports/"], :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"][target="_blank"], :root a[href^="http://www.sfippa.com/"], :root a[href^="http://www.xmediaserve.com/"], :root a[href^="http://www.sex.com/videos/?utm_"], :root a[href^="http://paid.outbrain.com/network/redir?"], :root a[href^="http://www.sex.com/?utm_"], :root a[onmousedown^="this.href='http://paid.outbrain.com/network/redir?"][target="_blank"], :root a[href^="http://www.roboform.com/php/land.php"], :root a[href^="http://www.myfreecams.com/?co_id="][href*="&track="], :root div[id^="advads-"], :root a[href^="https://k2s.cc/pr/"], :root a[href^="http://ad.au.doubleclick.net/"], :root a[href^="http://www.ringtonematcher.com/"], :root a[href^="http://secure.signup-page.com/"], :root a[href^="http://www.quick-torrent.com/download.html?aff"], :root a[href^="http://adexprt.me/"], :root a[href^="http://www.pinkvisualgames.com/?revid="], :root a[href^="https://trklvs.com/"], :root a[href^="http://www.paddypower.com/?AFF_ID="], :root div[data-spotim-slot], :root a[href^="http://www.freefilesdownloader.com/"], :root a[href^="http://www.mysuperpharm.com/"], :root .trc_rbox_border_elm .syndicatedItem, :root a[href^="http://www.myfreepaysite.com/sfw_int.php?aid"], :root a[href^="http://www.myfreepaysite.com/sfw.php?aid"], :root .rhsvw[style="background-color:#fff;margin:0 0 14px;padding-bottom:1px;padding-top:1px;"], :root a[href^="http://www.moneyducks.com/"], :root a[href^="http://bcntrack.com/"], :root a[href^="http://www.securegfm.com/"], :root a[href^="http://www.liversely.net/"], :root a[href^="http://www.linkbucks.com/referral/"], :root a[href^="//88d7b6aa44fb8eb.com/"], :root a[href^="http://www.ireel.com/signup?ref"], :root a[href*="=Adtracker"], :root a[href^="http://www.incredimail.com/?id="], :root a[href^="http://www.idownloadplay.com/"], :root a[href^="http://www.hitcpm.com/"], :root a[href^="http://www.greenmangaming.com/?tap_a="], :root a[href^="http://www.gamebookers.com/cgi-bin/intro.cgi?"], :root a[href^="https://www.financeads.net/tc.php?"], :root a[href^="http://www.friendlyduck.com/AF_"], :root a[href*="emprestimo.eu"], :root a[href^="http://www.fpcTraffic2.com/blind/in.cgi?"], :root a[href^="http://www.fonts.com/BannerScript/"], :root a[href^="http://www.fleshlight.com/"], :root a[href^="http://www.flashx.tv/downloadthis"], :root .trc_rbox_div a[target="_blank"][href^="http://tab"], :root a[href^="https://americafirstpolls.com/"], :root a[href^="http://clickserv.sitescout.com/"], :root a[href^="http://www.firstload.de/affiliate/"], :root a[href^="http://www.twinplan.com/AF_"], :root a[href^="http://www.fducks.com/"], :root a[href^="http://marketgid.com"], :root a[href^="http://www.faceporn.net/free?"], :root a[href^="http://www.epicgameads.com/"], :root a[href^="http://www.easydownloadnow.com/"], :root a[href^="http://www.duckssolutions.com/"], :root a[href^="https://go.trkclick2.com/"], :root a[href^="http://www.duckcash.eu/"], :root a[href^="http://www.drowle.com/"], :root a[href^="http://go.seomojo.com/tracking202/"], :root a[href^="http://www.downloadweb.org/"], :root .commercial-unit-mobile-top .jackpot-main-content-container > .UpgKEd + .nZZLFc > .vci, :root a[href^="http://www.installads.net/"], :root div[role="navigation"] + c-wiz > div > .kxhcC, :root a[href^="http://www.download-provider.org/"], :root a[href^="http://www.down1oads.com/"], :root a[href^="https://trafficmedia.center/"], :root a[href^="http://www.dealcent.com/register.php?affid="], :root .rscontainer > .ellip, :root a[href^="http://www.clkads.com/adServe/"], :root a[href^="http://www.clickansave.net/"], :root div[class^="adpubs-"], :root a[href*="deliver.trafficfabrik.com"], :root a[href^="http://www.cash-duck.com/"], :root a[href^="http://www.bitlord.me/share/"], :root a[href^="http://www.bet365.com/"][href*="?affiliate="], :root a[href^="http://www.bet365.com/"][href*="&affiliate="], :root a[href^="http://www.badoink.com/go.php?"], :root #mbEnd[cellspacing="0"][cellpadding="0"], :root div[data-ad-underplayer], :root a[href^="http://www.richducks.com/"], :root a[href^="http://www.babylon.com/welcome/index?affID"], :root a[href^="http://www.sexgangsters.com/?pid="], :root a[href^="http://www.amazon.co.uk/exec/obidos/external-search?"], :root a[href^="https://ads-for-free.com/click.php?"], :root a[href^="http://tracker.mybroadband.co.za/"], :root a[href^="http://www.socialsex.com/"], :root a[href^="https://www.camsoda.com/enter.php?id="], :root a[href^="http://www.afco2go.com/srv.php?"], :root a[href^="http://go.ad2up.com/"], :root a[href^="https://badoinkvr.com/"], :root a[href*="/adServe/banners?"], :root a[href^="http://www.adxpansion.com"], :root a[href^="http://www.ragazzeinvendita.com/?rcid="], :root .plistaList > .itemLinkPET, :root a[href^="http://ads.pheedo.com/"], :root a[href^="http://www.adbrite.com/mb/commerce/purchase_form.php?"], :root a[href^="http://www.TwinPlan.com/AF_"], :root #rhs_block .mod > .gws-local-hotels__booking-module, :root a[href^="http://www.my-dirty-hobby.com/?sub="], :root a[href^="https://porndeals.com/?track="], :root a[href^="http://www.affiliates1128.com/processing/"], :root a[href^="http://c.jumia.io/"], :root a[href^="http://www.1clickmoviedownloader.info/"], :root div[class^="adbanner_"], :root a[href^="http://www.brightwheel.info/"], :root a[href^="http://www.123-reg.co.uk/affiliate2.cgi"], :root div[id^="lazyad-"], :root div[itemtype="http://www.schema.org/WPAdBlock"], :root a[href^="http://wopertific.info/"], :root a[href^="http://bodelen.com/"], :root a[href^="http://wgpartner.com/"], :root a[href^="http://webgirlz.online/landing/"], :root div[id^="ads300_600-widget"], :root div[class^="Ad__adContainer"], :root a[href^="http://web.adblade.com/"], :root div[class^="BlockAdvert-"], :root a[href^="https://go.onclasrv.com/"], :root a[href^="http://wct.link/"], :root a[href^="http://s9kkremkr0.com/"], :root a[href^="https://www.nutaku.net/signup/landing/"], :root a[href^="http://us.marketgid.com"], :root a[href^="http://ul.to/ref/"], :root a[href^="http://trk.mdrtrck.com/"], :root a[href*=".ichlnk.com/"], :root div[id^="div_ad_stack_"], :root a[href^="http://traffic.tc-clicks.com/"], :root div[class^="awpcp-random-ads"], :root a[href^="http://www.graboid.com/affiliates/"], :root a[href^="http://tracking.toroadvertising.com/"], :root a[href^="http://www.liutilities.com/"], :root a[href^="http://www.dl-provider.com/search/"], :root a[href^="http://tracking.deltamediallc.com/"], :root a[href^="http://adultfriendfinder.com/p/register.cgi?pid="], :root a[href^="https://www.popads.net/users/"], :root iframe[src^="http://ad.yieldmanager.com/"], :root a[href^="http://pubads.g.doubleclick.net/"], :root a[href^="https://sexdatingz.live/"], :root a[href^="//bwnjijl7w.com/"], :root a[href^="https://adultfriendfinder.com/go/page/landing"], :root a[href^="http://tracking.crazylead.com/"], :root a[href^="http://track.adform.net/"], :root a[href^="https://iac.ampxdirect.com/"], :root a[href^="http://t.mdn2015x3.com/"], :root a[href^="http://steel.starflavor.bid/"], :root a[href^="http://galleries.securewebsiteaccess.com/"], :root a[href^="http://stateresolver.link/"], :root a[href^="http://sharesuper.info/"], :root a[href^="http://server.cpmstar.com/click.aspx?poolid="], :root a[href^="http://www.downloadthesefiles.com/"], :root a[href^="http://secure.cbdpure.com/aff/"], :root a[href^="http://t.mdn2015x1.com/"], :root a[href^="http://azmobilestore.co/"], :root a[href^="http://s5prou7ulr.com/"], :root a[href*="/cmd.php?ad="], :root a[href^="http://refpaano.host/"], :root #\5f _mom_ad_2, :root a[href^="http://ads.sprintrade.com/"], :root a[href^="http://record.commissionking.com/"], :root div[class*="-storyBodyAd-"], :root a[href^="http://record.betsafe.com/"], :root a[href^="https://keep2share.cc/pr/"], :root a[href^="https://clixtrac.com/"], :root [onclick*="content.ad/"], :root a[href^="http://adlev.neodatagroup.com/"], :root a[href^="http://reallygoodlink.extremefreegames.com/"], :root .ob_container .item-container-obpd, :root a[href^="http://www.adskeeper.co.uk/"], :root a[href^="http://websitedhoome.com/"], :root a[href^="http://see-work.info/"], :root a[href^="http://prousa.work/"], :root a[href^="http://promos.bwin.com/"], :root a[href^="http://prochina.link/"], :root a[href*=".irtyc.com/"], :root a[href^="http://z1.zedo.com/"], :root a[href^="http://pokershibes.com/index.php?ref="], :root #rhs_block .mod > .luhb-div > div[data-async-type="updateHotelBookingModule"], :root a[href^="http://mojofun.info/"], :root a[href^="http://mmo123.co/"], :root a[href^="http://media.paddypower.com/redirect.aspx?"], :root a[href*=".qertewrt.com/"], :root a[href^="//pubads.g.doubleclick.net/"], :root a[href^="http://lp.ncdownloader.com/"], :root #rhs_block .xpdopen > ._OKe > div > .mod > ._yYf, :root a[href^="//ads.ad-center.com/"], :root a[href^="https://track.trkinator.com/"], :root a[data-redirect^="this.href='http://paid.outbrain.com/network/redir?"], :root div[id^="ad-position-"], :root a[href^="http://liversely.com/"], :root a[href^="https://www.arthrozene.com/"][href*="?tid="], :root a[href^="http://feeds1.validclick.com/"], :root a[href^="http://latestdownloads.net/download.php?"], :root a[href^="http://k2s.cc/code/"], :root #topstuff > #tads, :root a[href^="https://atomidownload.com/"], :root a[href*=".bang.com/"][href*="&aff="], :root a[data-widget-outbrain-redirect^="http://paid.outbrain.com/network/redir?"], :root a[href^="http://join3.bannedsextapes.com/track/"], :root a[href^="https://secure.bstlnk.com/"], :root a[href^="http://jobitem.org/"], :root a[href^="https://gamescarousel.com/"], :root a[href^="http://istri.it/?"], :root a[href^="http://www.fbooksluts.com/"], :root a[href^="http://www.cdjapan.co.jp/aff/click.cgi/"], :root a[href^="//api.ad-goi.com/"], :root a[href*="//ridingintractable.com/"], :root a[href^="http://intent.bingads.com/"], :root div[id^="crt-"][style], :root a[href^="http://igromir.info/"], :root a[href^="https://track.themadtrcker.com/"], :root a[href^="http://hyperlinksecure.com/go/"], :root a[href^="http://45eijvhgj2.com/"], :root a[href^="http://hpn.houzz.com/"], :root a[href^="http://searchtabnew.com/"], :root a[href*="?adlivk="][href*="&refer="], :root a[href^="//look.djfiln.com/"], :root a[href^="http://greensmoke.com/"], :root a[href^="https://bnsjb1ab1e.com/"], :root a[href^="http://mo8mwxi1.com/"], :root div[class^="ResponsiveAd-"], :root a[href^="http://install.securewebsiteaccess.com/"], :root a[href^="http://www.revenuehits.com/"], :root div[id^="block-views-topheader-ad-block-"], :root a[href^="https://bs.serving-sys.com"], :root .__y_elastic .__y_item, :root a[href^="http://go.mobisla.com/"], :root a[href^="//srv.buysellads.com/"], :root a[href^="http://g1.v.fwmrm.net/ad/"], :root .widget-pane-section-result[data-result-ad-type], :root a[href^="http://imads.integral-marketing.com/"], :root a[href^="http://freesoftwarelive.com/"], :root a[href^="http://adtrackone.eu/"], :root a[href^="http://finaljuyu.com/"], :root a[href^="https://paid.outbrain.com/network/redir?"], :root a[href^="http://fileupnow.rocks/"], :root a[href^="http://fileloadr.com/"], :root a[href^="https://dltags.com/"], :root a[href^="http://onclickads.net/"], :root a[href^="https://gghf.mobi/"], :root a[href^="http://www.terraclicks.com/"], :root a[href^="http://www.coinducks.com/"], :root a[href^="http://extra.bet365.com/"][href*="?affiliate="], :root a[href^="http://ethfw0370q.com/"], :root [id^="bunyad_ads_"], :root a[href^="http://elitefuckbook.com/"], :root a[href^="https://www.brazzersnetwork.com/landing/"], :root #cnt #center_col > #taw > #tvcap > .c._oc._Lp, :root [href*="//xml.revrtb.com/"], :root a[href^="http://elite-sex-finder.com/?"], :root a[href^="http://eclkmpsa.com/"], :root a[href*="//3wr110.xyz/"], :root a[href^="http://earandmarketing.com/"], :root a[href^="https://www.mypornstarcams.com/landing/click/"], :root a[href*=".intab.fun/"], :root a[href^="http://secure.signup-way.com/"], :root [href^="https://maskip.co/"], :root a[href^="http://getlinksinaseconds.com/"], :root #content > #center > .dose > .dosesingle, :root a[href^="http://campaign.bharatmatrimony.com/track/"], :root a[href^="http://d2.zedo.com/"], :root a[href^="http://keep2share.cc/pr/"], :root a[href^="http://cp.cbbp1.com"], :root a[href^="http://contractallsticker.net/"], :root a[href^="http://codec.codecm.com/"], :root div[id^="google_dfp_"], :root a[href^="//5e1fcb75b6d662d.com/"], :root a[href^="http://googleads.g.doubleclick.net/pcs/click"], :root div[id^="ads120_600-widget"], :root a[href^="https://awejmp.com/"], :root a[href^="http://clk.directrev.com/"], :root a[href^="http://refer.webhostingbuzz.com/"], :root a[href^="http://clicks.guamwnvgashbkashawhgkhahshmashcas.pw/"], :root a[href^="http://www.downloadplayer1.com/"], :root a[href^="http://clicks.binarypromos.com/"], :root div[class^="largeRectangleAd_"], :root a[href^="https://dediseedbox.com/clients/aff.php?"], :root a[href^="http://www.wantstraffic.com/"], :root a[href^="http://databass.info/"], :root a[href^="http://www.urmediazone.com/signup"], :root a[href^="http://click.plista.com/pets"], :root a[href^="https://a.bestcontentpc.top/"], :root a[href^="http://chaturbate.com/affiliates/"], :root a[href^="http://www.firstload.com/affiliate/"], :root a[href^="http://www.friendlyadvertisements.com/"], :root a[href^="//00ae8b5a9c1d597.com/"], :root a[href^="http://cdn3.adbrau.com/"], :root a[href^="http://get.slickvpn.com/"], :root a[href^="http://amzn.to/"] > img[src^="data"], :root a[href^="http://bs.serving-sys.com/"], :root a[href^="http://cpaway.afftrack.com/"], :root a[href^="http://cdn.adsrvmedia.net/"], :root [lazy-ad="top_banner"], :root a[href^="http://360ads.go2cloud.org/"], :root a[href^="http://dftrck.com/"], :root a[href^="http://casino-x.com/?partner"], :root div[data-flt-ve="sponsored_search_ads"], :root a[href^="http://record.sportsbetaffiliates.com.au/"], :root a[href^="http://campeeks.com/"][href*="&utm_"], :root #flowplayer > div[style="position: absolute; width: 300px; height: 275px; left: 222.5px; top: 85px; z-index: 999;"], :root a[href^="http://download-performance.com/"], :root a[href^="http://www.on2url.com/app/adtrack.asp"], :root #\5f _nq__hh[style="display:block!important"], :root a[href^="http://guideways.info/"], :root a[href^="http://campaign.bharatmatrimony.com/cbstrack/"], :root a[href^="http://ads.expekt.com/affiliates/"], :root a[href^="http://callville.xyz/"], :root a[href^="http://xads.zedo.com/"], :root a[href^="http://yads.zedo.com/"], :root a[href^="https://bullads.net/get/"], :root a[href^="http://down1oads.com/"], :root a[href^="http://buysellads.com/"], :root a[href^="https://uncensored.game/"], :root td[valign="top"] > .mainmenu[style="padding:10px 0 0 0 !important;"], :root a[href^="http://feedads.g.doubleclick.net/"], :root a[href^="http://betahit.click/"], :root a[href^="http://bestorican.com/"], :root a[href^="http://bcp.crwdcntrl.net/"], :root a[href^="http://bc.vc/?r="], :root a[href^="http://www.pheedo.com/"], :root a[href^="http://banners.victor.com/processing/"], :root a[href^="http://adf.ly/?id="], :root a[href^="https://uncensored3d.com/"], :root a[href^="http://t.mdn2015x2.com/"], :root div[data-subscript="Advertising"], :root div[class$="dealnews"] > .dealnews, :root a[href^="http://click.payserve.com/"], :root a[href^="http://api.ringtonematcher.com/"], :root a[href^="http://affiliate.glbtracker.com/"], :root a[href^="https://transfer.xe.com/signup/track/redirect?"], :root a[href^="http://anonymous-net.com/"], :root a[href^="https://www.dsct1.com/"], :root a[data-oburl^="https://paid.outbrain.com/network/redir?"], :root .icons-rss-feed + .icons-rss-feed div[class$="_item"], :root a[href^="http://aflrm.com/"], :root a[href^="http://affiliates.pinnaclesports.com/processing/"], :root a[href^="http://affiliate.godaddy.com/"], :root a[href^="http://partner.sbaffiliates.com/"], :root a[href^="http://affiliate.coral.co.uk/processing/"], :root a[href^="http://aff.ironsocket.com/"], :root a[href^="http://adsrv.keycaptcha.com"], :root a[data-redirect^="https://paid.outbrain.com/network/redir?"], :root a[href^="http://play4k.co/"], :root a[href^="http://adserving.liveuniversenetwork.com/"], :root a[href^="https://zononi.com/"], :root a[href^="http://adserving.unibet.com/"], :root a[href^="http://adtransfer.net/"], :root a[href^="http://adserver.itsfogo.com/"], :root a[href^="https://secure.adnxs.com/clktrb?"], :root a[href^="http://adserver.adtechus.com/"], :root a[href^="http://adserver.adreactor.com/"], :root a[href^="http://www.yourfuckbook.com/?"], :root a[href^="//go.onclasrv.com/"], :root .GHOFUQ5BG2 > .GHOFUQ5BF2 > .GHOFUQ5BG5, :root .__ywvr .__y_item, :root #\5f _mom_ad_12, :root a[href^="http://ads.integral-marketing.com/"], :root a[href^="http://adserver.adtech.de/"], :root a[href^="http://cwcams.com/landing/click/"], :root a[href^="http://ads.betfair.com/redirect.aspx?"], :root a[href^="http://ads.affbuzzads.com/"], :root a[href^="http://tc.tradetracker.net/"], :root a[href^="http://online.ladbrokes.com/promoRedirect?"], :root a[href^="http://go.trafficshop.com/"], :root a[href^="http://ads.ad-center.com/"], :root div[id^="advt-"], :root a[href^="http://admingame.info/"], :root div[id^="q1-adset-"], :root a[href^="http://adfarm.mediaplex.com/"], :root a[href^="http://ad.doubleclick.net/"], :root a[href^="https://understandsolar.com/signup/?lead_source="][href*="&tracking_code="], :root a[href^="http://ad-emea.doubleclick.net/"], :root a[href*="/servlet/click/zone?"], :root a[href^="http://ad-apac.doubleclick.net/"], :root script[src^="http://free-shoutbox.net/app/webroot/shoutbox/sb.php?shoutbox="] + #freeshoutbox_content, :root a[href^="http://hdplugin.flashplayer-updates.com/"], :root .trc_rbox_div .syndicatedItem, :root a[href^="http://data.ad.yieldmanager.net/"], :root a[href^="http://a63t9o1azf.com/"], :root a[href^="http://srvpub.com/"], :root a[href^="http://a.adquantix.com/"], :root a[href^="http://NowDownloadAll.com"], :root #assetsListings[style="display: block;"], :root a[href^="http://9nl.es/"], :root a[href^="http://abc2.mobile-10.com/"], :root a[href^="http://adtrack123.pl/"], :root [id*="MGWrap"], :root a[href^="http://9amq5z4y1y.com/"], :root a[href^="http://4c7og3qcob.com/"], :root a[href^="//go.vedohd.org/"], :root a[href^="http://www.ducksnetwork.com/"], :root a[href^="http://3wr110.net/"], :root a[href^="http://www5.smartadserver.com/call/pubjumpi/"], :root a[href^="http://1phads.com/"], :root #MAIN.ShowTopic > .ad, :root a[href^="https://porngames.adult/?SID="], :root a[href^="http://findersocket.com/"], :root a[href^="https://m.do.co/c/"] > img, :root a[href^="http://connectlinking6.com/"], :root a[href^="https://spygasm.com/track?"], :root a[href^="http://cdn3.adexprts.com/"], :root #tads + div + .c, :root a[href^="//jsmptjmp.com/"], :root a[href^="https://ilovemyfreedoms.com/"][href*="?affiliate_id="], :root a[href^="//healthaffiliate.center/"], :root a[href^="http://games.ucoz.ru/"][target="_blank"], :root [id*="ScriptRoot"], :root a[href^="//db52cc91beabf7e8.com/"], :root a[href^="http://ads.activtrades.com/"], :root div[id^="drudge-column-ads-"], :root .plistaList > .plista_widget_underArticle_item[data-type="pet"], :root #center_col > #taw > #tvcap > .commercial-unit-desktop-top, :root a[href^="http://www.afgr2.com/"], :root #mn div[style="position:relative"] > #center_col > ._Ak, :root a[href^="https://www.oboom.com/ad/"], :root a[href^="//4f6b2af479d337cf.com/"], :root a[href^="https://www.friendlyduck.com/AF_"], :root #center_col > #resultStats + div + #res + #tads, :root a[href^="//40ceexln7929.com/"], :root div[id^="div-gpt-ad"], :root a[href^="http://fusionads.net"], :root a[href^=" http://www.sex.com/"][href*="&utm_"], :root .section-result[data-result-ad-type], :root a[href^=" http://ads.ad-center.com/"], :root div[id^="dfp-slot-"], :root .l-container > #fishtank, :root a[href^="https://fileboom.me/pr/"], :root .GPMV2XEDA2 > .GPMV2XEDP1 > .GPMV2XEDJBB, :root a[href*="onclkds."], :root #ads > .dose > .dosesingle, :root a[href*="delivery.trafficfabrik.com"], :root a[href*="=exoclick"], :root div[class^="backfill-taboola-home-slot-"], :root a[href*="=adscript"], :root #mn #center_col > div > h2.spon:first-child, :root FBS-AD, :root .ra[align="right"][width="30%"], :root a[href*="5iclx7wa4q.com"], :root a[href*=".revimedia.com/"], :root [lazy-ad="leftbottom_banner"], :root p[id^="div-gpt-ad-"], :root a[href^="http://fsoft4down.com/"], :root a[href*="ad2upapp.com/"], :root .inlineNewsletterSubscription + .inlineNewsletterSubscription div[class$="_item"], :root #taw > .med + div > #tvcap > .mnr-c:not(.qs-ic) > .commercial-unit-mobile-top, :root .plista_widget_belowArticleRelaunch_item[data-type="pet"], :root div[data-mediatype="advertising"], :root .mw > #rcnt > #center_col > #taw > #tvcap > .c, :root a[href^="https://playuhd.host/"], :root a[href^="http://mgid.com/"], :root a[href*=".adsrv.eacdn.com/"] > img, :root a[href^="http://lp.ilivid.com/"], :root a[href^="http://secure.hostgator.com/~affiliat/"], :root [onclick^="window.open('http://adultfriendfinder.com/search/"], :root a[href^="http://data.committeemenencyclopedicrepertory.info/"], :root a[href*=".allsports4you.club"], :root a[href^="http://spygasm.com/track?"], :root .ob_dual_right > .ob_ads_header ~ .odb_div, :root a[href*=".adk2x.com/"], :root a[href^="http://duckcash.eu/"], :root a[href^="http://www.mobileandinternetadvertising.com/"], :root .GB3L-QEDGY .GB3L-QEDF- > .GB3L-QEDE-, :root a[data-url^="http://paid.outbrain.com/network/redir?"] + .author, :root a[href^="http://liversely.net/"], :root .ra[width="30%"][align="right"] + table[width="70%"][cellpadding="0"], :root iframe[id^="google_ads_frame"], :root a[href^="http://www.bluehost.com/track/"] > img, :root a[data-url^="http://paid.outbrain.com/network/redir?"], :root a[href^="http://n.admagnet.net/"], :root a[href^="http://bestchickshere.com/"], :root a[href^="http://www.streamtunerhd.com/signup?"], :root #ssmiwdiv[jsdisplay], :root a[href^="//awejmp.com/"], :root a[href^="http://www.getyourguide.com/?partner_id="], :root [onclick^="window.open('https://www.brazzersnetwork.com/landing/"], :root a[href*="a2g-secure.com"], :root #resultspanel > #topads, :root a[href^="http://espn.zlbu.net/"], :root a[href^="http://k2s.cc/pr/"], :root [onclick^="window.open('window.open('//delivery.trafficfabrik.com/"], :root a[href^="http://adrunnr.com/"], :root [lazy-ad="leftthin_banner"], :root [id*="MarketGid"], :root a[href^="http://www.accuserveadsystem.com/accuserve-go.php?"], :root a[href^="http://c.ketads.com/"], :root a[href^="http://6kup12tgxx.com/"], :root a[target="_blank"][onmousedown="this.href^='http://paid.outbrain.com/network/redir?"], :root a[href^="http://hd-plugins.com/download/"], :root a[href^="//voyeurhit.com/cs/"], :root a[href^="http://www.afgr3.com/"], :root [ad-id^="googlead"], :root a[href^="https://topoffers.com/"][href*="/?pid="], :root a[href^="http://vinfdv6b4j.com/"], :root a[href^="http://bonusfapturbo.nmvsite.com/"], :root a[href^="//porngames.adult/?SID="], :root DFP-AD, :root a[href^="//www.mgid.com/"], :root #center_col > div[style="font-size:14px;margin-right:0;min-height:5px"] > div[style="font-size:14px;margin:0 4px;padding:1px 5px;background:#fff8e7"], :root a[href^="http://track.affiliatenetwork.co.za/"], :root a[data-redirect^="http://paid.outbrain.com/network/redir?"], :root .jobs-information-call-to-action + .jobs-information-call-to-action div[class$="_item"], :root a[href^="http://servicegetbook.net/"], :root #rhs_block > #mbEnd, :root a[href^="http://cinema.friendscout24.de?"], :root [lazy-ad="lefttop_banner"], :root .__y_inner > .__y_item, :root a[href^="https://secure.cbdpure.com/aff/"], :root AMP-AD, :root a[href^="http://adclick.g.doubleclick.net/"], :root #main-content > [style="padding:10px 0 0 0 !important;"], :root #center_col > #resultStats + div[style="border:1px solid #dedede;margin-bottom:11px;padding:5px 7px 5px 6px"], :root div[class^="lifeOnwerAd"], :root a[data-oburl^="http://paid.outbrain.com/network/redir?"], :root iframe[src^="http://cdn1.adexprt.com/"], :root a[href^="http://dwn.pushtraffic.net/"], :root a[href$="/vghd.shtml"], :root a[href^="https://redirect.ero-advertising.com/"], :root a[href^="http://easydownload4you.com/"], :root a[href^="http://ffxitrack.com/"], :root #center_col > #main > .dfrd > .mnr-c > .c._oc._zs, :root a[href^="http://b.bestcompleteusa.info/"], :root .trc_rbox_div .syndicatedItemUB, :root #mn div[style="position:relative"] > #center_col > div > ._dPg, :root a[href^="http://www.myvpn.pro/"], :root a[href^="//www.pd-news.com/"], :root a[href^="http://www.pinkvisualpad.com/?revid="], :root a[href*=".clksite.com/"], :root a[href^="http://www.webtrackerplus.com/"], :root .GJJKPX2N1 > .GJJKPX2M1 > .GJJKPX2P4, :root #center_col > #taw > #tvcap > .cu-container > .commercial-unit-desktop-top, :root a[href^="http://centertrust.xyz/"], :root a[href^="https://intrev.co/"], :root div[id^="google_ads_iframe_"], :root .vi-lb-placeholder[title="ADVERTISEMENT"], :root a[href^="http://goldmoney.com/?gmrefcode="], :root a[href^="http://papi.mynativeplatform.com:80/pub2/"], :root LEADERBOARD-AD, :root #mn #center_col > div > h2.spon:first-child + ol:last-child, :root a[href^="https://bongacams2.com/track?"], :root a[href^="//zenhppyad.com/"], :root .gbfwa > div[class$="_item"], :root a[href^="http://www.menaon.com/installs/"], :root a[href^="http://taboola-"][href*="/redirect.php?app.type="], :root .mw > #rcnt > #center_col > #taw > .c, :root a[href^="http://api.content.ad/"], :root a[href*=".clkcln.com/"], :root .commercial-unit-desktop-rhs > .iKidV > .Ee92ae + .P2mpm + .hp3sk, :root a[href^="http://prochina.space/"], :root a[href^="http://www.uniblue.com/cm/"], :root a[href^="http://landingpagegenius.com/"], :root a[data-redirect^="http://click.plista.com/pets"], :root #rhs_block > script + .c._oc._Ve.rhsvw, :root .__zinit .__y_item, :root .ch[onclick="ga(this,event)"], :root a[href^="http://track.incognitovpn.com/"], :root .__ywl .__y_item, :root a[href^="http://track.trkvluum.com/"], :root a[href*="/adrotate-out.php?"], :root a[href^="http://linksnappy.com/?ref="], :root [src^="/Redirect.a2b?"], :root a[href^="http://www.torntvdl.com/"], :root #center_col > #resultStats + #tads, :root .__yinit .__y_item, :root .ra[align="left"][width="30%"], :root a[href^="https://trackjs.com/?utm_source"], :root AFS-AD, :root #cnt #center_col > #res > #topstuff > .ts, :root a[href^="https://landing.brazzersnetwork.com/"], :root a[href^="http://www.firstclass-download.com/"], :root a[href*=".trust.zone"], :root a[href*="googleme.eu"], :root .mod > ._jH + .rscontainer, :root .GFYY1SVD2 > .GFYY1SVC2 > .GFYY1SVF5, :root a[href^="https://dcs.adgear.com/clicks/"], :root a[href^="http://affiliates.score-affiliates.com/"], :root #rhswrapper > #rhssection[border="0"][bgcolor="#ffffff"], :root .Mpopup + #Mad > #MadZone, :root a[href^="https://www.adxtro.com/"], :root #center_col > #\5f Emc, :root div[id^="dfp-ad-"], :root a[href^="http://ads2.williamhill.com/redirect.aspx?"], :root a[href^="https://www.spyoff.com/"], :root AD-TRIPLE-BOX, :root a[href^="//z6naousb.com/"], :root .rc-cta[data-target], :root #rhs_block > .ts[cellspacing="0"][cellpadding="0"][style="padding:0"], :root #header + #content > #left > #rlblock_left, :root a[href^="http://www.seekbang.com/cs/"], :root a[href^="http://syndication.exoclick.com/"], :root a[href^="http://bluehost.com/track/"], :root a[href^="https://squren.com/rotator/?atomid="], :root .nrelate .nr_partner, :root #center_col > #resultStats + #tads + #res + #tads, :root a[href^="//medleyads.com/spot/"], :root a[href*="mfroute.com/"], :root #rhs_block > ol > .rhsvw > .kp-blk > .xpdopen > ._OKe > ol > ._DJe > .luhb-div, :root a[href^="http://tezfiles.com/pr/"], :root a[href^="http://t.wowtrk.com/"], :root #center_col > #taw > #tvcap > .rscontainer, :root #main_col > #center_col div[style="font-size:14px;margin:0 4px;padding:1px 5px;background:#fff7ed"], :root a[href^="http://webtrackerplus.com/"], :root a[href^="http://clickandjoinyourgirl.com/"], :root div[itemtype="http://schema.org/WPAdBlock"], :root a[href^="https://www.nudeidols.com/cams/"], :root #center_col > #res > #topstuff + #search > div > #ires > #rso > #flun, :root a[href^="http://www.sex.com/pics/?utm_"], :root a[href^="http://vo2.qrlsx.com/"], :root a[href^="http://engine.newsmaxfeednetwork.com/"], :root a[href^="http://ad.yieldmanager.com/"], :root a[href^="http://www.plus500.com/?id="], :root #flowplayer > div[style="z-index: 208; position: absolute; width: 300px; height: 275px; left: 222.5px; top: 85px;"], :root a[href^="http://ddownload39.club/"], :root a[href^="http://n217adserv.com/"], :root a[href^="//4c7og3qcob.com/"] { display: none !important; }</style></head>
<body class="language-php">

    <div class="sidebar_layout" id="docsScreen">

        <div class="page_contain">
            <div class="contain">
                <aside class="sidebar">
                    <a href="../02-Getting%20Started/01-Installation.html" class="logo">
                        <img class="mark" src="../index_files/logomark.min.svg" alt="Laravel">
                        <img class="type" src="../index_files/logotype.min.svg" alt="Laravel">
                    </a>
                    <nav>
                        <div class="navigation_contain" style="display: block;">
                            <div class="docs_sidebar">
                                <ul>
                                    <li class="">
                                        <h2>Prologue</h2>
                                        <ul>
                                            <li><a href="../01-Prologue/01-Release%20Notes.html">Release Notes</a></li>
                                            <li><a href="../01-Prologue/02-Upgrade%20Guide.html">Upgrade Guide</a></li>
                                            <li><a href="../01-Prologue/03-Contribution%20Guide.html">Contribution Guide</a></li>
                                            <li><a href="https://laravel.com/api/6.0">API Documentation</a></li>
                                        </ul>
                                    </li>
                                    <li class="">
                                        <h2>Getting Started</h2>
                                        <ul>
                                            <li><a href="../02-Getting%20Started/01-Installation.html">Installation</a></li>
                                            <li><a href="../02-Getting%20Started/02-Configuration.html">Configuration</a></li>
                                            <li><a href="../02-Getting%20Started/03-Directory%20Structure.html">Directory Structure</a></li>
                                            <li><a href="../02-Getting%20Started/04-Homestead.html">Homestead</a></li>
                                            <li><a href="../02-Getting%20Started/05-Valet.html">Valet</a></li>
                                            <li><a href="../02-Getting%20Started/06-Deployment.html">Deployment</a></li>
                                        </ul>
                                    </li>
                                    <li class="">
                                        <h2>Architecture Concepts</h2>
                                        <ul>
                                            <li><a href="../03-Architecture%20Concepts/01-Request%20Lifecycle.html">Request Lifecycle</a></li>
                                            <li><a href="../03-Architecture%20Concepts/02-Service%20Container.html">Service Container</a></li>
                                            <li><a href="../03-Architecture%20Concepts/03-Service%20Providers.html">Service Providers</a></li>
                                            <li><a href="../03-Architecture%20Concepts/04-Facades.html">Facades</a></li>
                                            <li><a href="../03-Architecture%20Concepts/05-Contracts.html">Contracts</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <h2>The Basics</h2>
                                        <ul>
                                            <li><a href="../04-The%20Basics/01-Routing.html">Routing</a></li>
                                            <li><a href="../04-The%20Basics/02-Middleware.html">Middleware</a></li>
                                            <li><a href="../04-The%20Basics/03-CSRF%20Protection.html">CSRF Protection</a></li>
                                            <li><a href="../04-The%20Basics/04-Controllers.html">Controllers</a></li>
                                            <li><a href="../04-The%20Basics/05-Requests.html">Requests</a></li>
                                            <li><a href="../04-The%20Basics/06-Responses.html">Responses</a></li>
                                            <li><a href="../04-The%20Basics/07-Views.html">Views</a></li>
                                            <li><a href="../04-The%20Basics/08-URL%20Generation.html">URL Generation</a></li>
                                            <li><a href="../04-The%20Basics/09-Session.html">Session</a></li>
                                            <li><a href="../04-The%20Basics/10-Validation.html">Validation</a></li>
                                            <li><a href="../04-The%20Basics/11-Error%20Handling.html">Error Handling</a></li>
                                            <li><a href="../04-The%20Basics/12-Logging.html">Logging</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <h2>Frontend</h2>
                                        <ul>
                                            <li><a href="../05-Frontend/01-Blade%20Templates.html">Blade Templates</a></li>
                                            <li><a href="../05-Frontend/02-Localization.html">Localization</a></li>
                                            <li><a href="../05-Frontend/03-Frontend%20Scaffolding.html">Frontend Scaffolding</a></li>
                                            <li><a href="../05-Frontend/04-Compiling%20Assets.html">Compiling Assets</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <h2>Security</h2>
                                        <ul>
                                            <li><a href="../06-Security/01-Authentication.html">Authentication</a></li>
                                            <li><a href="../06-Security/02-API%20Authentication.html">API Authentication</a></li>
                                            <li><a href="../06-Security/03-Authorization.html">Authorization</a></li>
                                            <li><a href="../06-Security/04-Email%20Verification.html">Email Verification</a></li>
                                            <li><a href="../06-Security/05-Encryption.html">Encryption</a></li>
                                            <li><a href="../06-Security/06-Hashing.html">Hashing</a></li>
                                            <li><a href="../06-Security/07-Password%20Reset.html">Password Reset</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <h2>Digging Deeper</h2>
                                        <ul>
                                            <li><a href="../07-Digging%20Deeper/01-Artisan%20Console.html">Artisan Console</a></li>
                                            <li><a href="../07-Digging%20Deeper/02-Broadcasting.html">Broadcasting</a></li>
                                            <li><a href="../07-Digging%20Deeper/03-Cache.html">Cache</a></li>
                                            <li><a href="../07-Digging%20Deeper/04-Collections.html">Collections</a></li>
                                            <li><a href="../07-Digging%20Deeper/05-Events.html">Events</a></li>
                                            <li><a href="../07-Digging%20Deeper/06-File%20Storage.html">File Storage</a></li>
                                            <li><a href="../07-Digging%20Deeper/07-Helpers.html">Helpers</a></li>
                                            <li><a href="../07-Digging%20Deeper/08-Mail.html">Mail</a></li>
                                            <li><a href="../07-Digging%20Deeper/09-Notifications.html">Notifications</a></li>
                                            <li><a href="../07-Digging%20Deeper/10-Package%20Development.html">Package Development</a></li>
                                            <li><a href="../07-Digging%20Deeper/11-Queues.html">Queues</a></li>
                                            <li><a href="../07-Digging%20Deeper/12-Task%20Scheduling.html">Task Scheduling</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <h2>Database</h2>
                                        <ul>
                                            <li><a href="../08-Database/01-Getting%20Started.html">Getting Started</a></li>
                                            <li><a href="../08-Database/02-Query%20Builder.html">Query Builder</a></li>
                                            <li><a href="../08-Database/03-Pagination.html">Pagination</a></li>
                                            <li><a href="../08-Database/04-Migrations.html">Migrations</a></li>
                                            <li><a href="../08-Database/05-Seeding.html">Seeding</a></li>
                                            <li><a href="../08-Database/06-Redis.html">Redis</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <h2>Eloquent ORM</h2>
                                        <ul>
                                            <li><a href="../09-Eloquent%20ORM/01-Getting%20Started.html">Getting Started</a></li>
                                            <li><a href="../09-Eloquent%20ORM/02-Relationships.html">Relationships</a></li>
                                            <li><a href="../09-Eloquent%20ORM/03-Collections.html">Collections</a></li>
                                            <li><a href="../09-Eloquent%20ORM/04-Mutators.html">Mutators</a></li>
                                            <li><a href="../09-Eloquent%20ORM/05-API%20Resources.html">API Resources</a></li>
                                            <li><a href="../09-Eloquent%20ORM/06-Serialization.html">Serialization</a></li>
                                        </ul>
                                    </li>
                                    <li class="sub--on">
                                        <h2>Testing</h2>
                                        <ul>
                                            <li><a href="../10-Testing/01-Getting%20Started.html">Getting Started</a></li>
                                            <li><a href="../10-Testing/02-HTTP%20Tests.html">HTTP Tests</a></li>
                                            <li><a href="../10-Testing/03-Console%20Tests.html">Console Tests</a></li>
                                            <li><a href="../10-Testing/04-Browser%20Tests.html">Browser Tests</a></li>
                                            <li><a href="../10-Testing/05-Database.html">Database</a></li>
                                            <li><a href="../10-Testing/06-Mocking.html">Mocking</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <h2>Official Packages</h2>
                                        <ul>
                                            <li><a href="../11-Official%20Packages/01-Cashier.html">Cashier</a></li>
                                            <li><a href="../10-Testing/04-Browser%20Tests.html">Dusk</a></li>
                                            <li><a href="../11-Official%20Packages/03-Envoy.html">Envoy</a></li>
                                            <li><a href="../11-Official%20Packages/04-Horizon.html">Horizon</a></li>
                                            <li><a href="../11-Official%20Packages/05-Passport.html">Passport</a></li>
                                            <li><a href="../11-Official%20Packages/06-Scout.html">Scout</a></li>
                                            <li><a href="../11-Official%20Packages/07-Socialite.html">Socialite</a></li>
                                            <li><a href="../11-Official%20Packages/08-Telescope.html">Telescope</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>

                            <script async="" type="text/javascript" src="../index_files/carbon.js.download" id="_carbonads_js" style="display: none !important;"></script>


                        </div>
                    </nav>
                    <div class="trigger_contain">
                        <a href="https://laravel.com/docs/6.0#" class="nav_trigger"><div class="bar"></div></a>
                    </div>
                </aside>

                <section class="body_content">

                    <section class="docs_body">
                        <section class="docs_main">
                            <h1>Queues</h1>
<ul>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#connections-vs-queues">Connections Vs. Queues</a></li>
<li><a href="#driver-prerequisites">Driver Notes &amp; Prerequisites</a></li>
</ul></li>
<li><a href="#creating-jobs">Creating Jobs</a>
<ul>
<li><a href="#generating-job-classes">Generating Job Classes</a></li>
<li><a href="#class-structure">Class Structure</a></li>
<li><a href="#job-middleware">Job Middleware</a></li>
</ul></li>
<li><a href="#dispatching-jobs">Dispatching Jobs</a>
<ul>
<li><a href="#delayed-dispatching">Delayed Dispatching</a></li>
<li><a href="#synchronous-dispatching">Synchronous Dispatching</a></li>
<li><a href="#job-chaining">Job Chaining</a></li>
<li><a href="#customizing-the-queue-and-connection">Customizing The Queue &amp; Connection</a></li>
<li><a href="#max-job-attempts-and-timeout">Specifying Max Job Attempts / Timeout Values</a></li>
<li><a href="#rate-limiting">Rate Limiting</a></li>
<li><a href="#error-handling">Error Handling</a></li>
</ul></li>
<li><a href="#queueing-closures">Queueing Closures</a></li>
<li><a href="#running-the-queue-worker">Running The Queue Worker</a>
<ul>
<li><a href="#queue-priorities">Queue Priorities</a></li>
<li><a href="#queue-workers-and-deployment">Queue Workers &amp; Deployment</a></li>
<li><a href="#job-expirations-and-timeouts">Job Expirations &amp; Timeouts</a></li>
</ul></li>
<li><a href="#supervisor-configuration">Supervisor Configuration</a></li>
<li><a href="#dealing-with-failed-jobs">Dealing With Failed Jobs</a>
<ul>
<li><a href="#cleaning-up-after-failed-jobs">Cleaning Up After Failed Jobs</a></li>
<li><a href="#failed-job-events">Failed Job Events</a></li>
<li><a href="#retrying-failed-jobs">Retrying Failed Jobs</a></li>
<li><a href="#ignoring-missing-models">Ignoring Missing Models</a></li>
</ul></li>
<li><a href="#job-events">Job Events</a></li>
</ul>
<p><a name="introduction"></a></p>
<h2><a href="#introduction">Introduction</a></h2>
<blockquote>
<div class="callout"><div class="icon purple"><img src="./11-Queues_files/lightbulb.min.svg"></div><p class="content"> Laravel now offers Horizon, a beautiful dashboard and configuration system for your Redis powered queues. Check out the full <a href="https://laravel.com/docs/6.0/horizon">Horizon documentation</a> for more information.</p></div>
</blockquote>
<p>Laravel queues provide a unified API across a variety of different queue backends, such as Beanstalk, Amazon SQS, Redis, or even a relational database. Queues allow you to defer the processing of a time consuming task, such as sending an email, until a later time. Deferring these time consuming tasks drastically speeds up web requests to your application.</p>
<p>The queue configuration file is stored in <code class=" language-php">config<span class="token operator">/</span>queue<span class="token punctuation">.</span>php</code>. In this file you will find connection configurations for each of the queue drivers that are included with the framework, which includes a database, <a href="https://kr.github.io/beanstalkd/">Beanstalkd</a>, <a href="https://aws.amazon.com/sqs/">Amazon SQS</a>, <a href="https://redis.io/">Redis</a>,  and a synchronous driver that will execute jobs immediately (for local use). A <code class=" language-php"><span class="token constant">null</span></code> queue driver is also included which discards queued jobs.</p>
<p><a name="connections-vs-queues"></a></p>
<h3><a href="#connections-vs-queues">Connections Vs. Queues</a></h3>
<p>Before getting started with Laravel queues, it is important to understand the distinction between "connections" and "queues". In your <code class=" language-php">config<span class="token operator">/</span>queue<span class="token punctuation">.</span>php</code> configuration file, there is a <code class=" language-php">connections</code> configuration option. This option defines a particular connection to a backend service such as Amazon SQS, Beanstalk, or Redis. However, any given queue connection may have multiple "queues" which may be thought of as different stacks or piles of queued jobs.</p>
<p>Note that each connection configuration example in the <code class=" language-php">queue</code> configuration file contains a <code class=" language-php">queue</code> attribute. This is the default queue that jobs will be dispatched to when they are sent to a given connection. In other words, if you dispatch a job without explicitly defining which queue it should be dispatched to, the job will be placed on the queue that is defined in the <code class=" language-php">queue</code> attribute of the connection configuration:</p>
<pre class=" language-php"><code class=" language-php"><span class="token comment">// This job is sent to the default queue...</span>
Job<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// This job is sent to the "emails" queue...</span>
Job<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onQueue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Some applications may not need to ever push jobs onto multiple queues, instead preferring to have one simple queue. However, pushing jobs to multiple queues can be especially useful for applications that wish to prioritize or segment how jobs are processed, since the Laravel queue worker allows you to specify which queues it should process by priority. For example, if you push jobs to a <code class=" language-php">high</code> queue, you may run a worker that gives them higher processing priority:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work <span class="token operator">--</span>queue<span class="token operator">=</span>high<span class="token punctuation">,</span><span class="token keyword">default</span></code></pre>
<p><a name="driver-prerequisites"></a></p>
<h3><a href="#driver-prerequisites">Driver Notes &amp; Prerequisites</a></h3>
<h4>Database</h4>
<p>In order to use the <code class=" language-php">database</code> queue driver, you will need a database table to hold the jobs. To generate a migration that creates this table, run the <code class=" language-php">queue<span class="token punctuation">:</span>table</code> Artisan command. Once the migration has been created, you may migrate your database using the <code class=" language-php">migrate</code> command:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>table

php artisan migrate</code></pre>
<h4>Redis</h4>
<p>In order to use the <code class=" language-php">redis</code> queue driver, you should configure a Redis database connection in your <code class=" language-php">config<span class="token operator">/</span>database<span class="token punctuation">.</span>php</code> configuration file.</p>
<p><strong>Redis Cluster</strong></p>
<p>If your Redis queue connection uses a Redis Cluster, your queue names must contain a <a href="https://redis.io/topics/cluster-spec#keys-hash-tags">key hash tag</a>. This is required in order to ensure all of the Redis keys for a given queue are placed into the same hash slot:</p>
<pre class=" language-php"><code class=" language-php"><span class="token single-quoted-string string">'redis'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'redis'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'connection'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'queue'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'{default}'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'retry_after'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre>
<p><strong>Blocking</strong></p>
<p>When using the Redis queue, you may use the <code class=" language-php">block_for</code> configuration option to specify how long the driver should wait for a job to become available before iterating through the worker loop and re-polling the Redis database.</p>
<p>Adjusting this value based on your queue load can be more efficient than continually polling the Redis database for new jobs. For instance, you may set the value to <code class=" language-php"><span class="token number">5</span></code> to indicate that the driver should block for five seconds while waiting for a job to become available:</p>
<pre class=" language-php"><code class=" language-php"><span class="token single-quoted-string string">'redis'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'redis'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'connection'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'queue'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'retry_after'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'block_for'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre>
<h4>Other Driver Prerequisites</h4>
<p>The following dependencies are needed for the listed queue drivers:</p>
<div class="content-list">
<ul>
<li>Amazon SQS: <code class=" language-php">aws<span class="token operator">/</span>aws<span class="token operator">-</span>sdk<span class="token operator">-</span>php <span class="token operator">~</span><span class="token number">3.0</span></code></li>
<li>Beanstalkd: <code class=" language-php">pda<span class="token operator">/</span>pheanstalk <span class="token operator">~</span><span class="token number">4.0</span></code></li>
<li>Redis: <code class=" language-php">predis<span class="token operator">/</span>predis <span class="token operator">~</span><span class="token number">1.0</span></code></li>
</ul>
</div>
<p><a name="creating-jobs"></a></p>
<h2><a href="#creating-jobs">Creating Jobs</a></h2>
<p><a name="generating-job-classes"></a></p>
<h3><a href="#generating-job-classes">Generating Job Classes</a></h3>
<p>By default, all of the queueable jobs for your application are stored in the <code class=" language-php">app<span class="token operator">/</span>Jobs</code> directory. If the <code class=" language-php">app<span class="token operator">/</span>Jobs</code> directory doesn't exist, it will be created when you run the <code class=" language-php">make<span class="token punctuation">:</span>job</code> Artisan command. You may generate a new queued job using the Artisan CLI:</p>
<pre class=" language-php"><code class=" language-php">php artisan make<span class="token punctuation">:</span>job ProcessPodcast</code></pre>
<p>The generated class will implement the <code class=" language-php">Illuminate\<span class="token package">Contracts<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>ShouldQueue</span></code> interface, indicating to Laravel that the job should be pushed onto the queue to run asynchronously.</p>
<p><a name="class-structure"></a></p>
<h3><a href="#class-structure">Class Structure</a></h3>
<p>Job classes are very simple, normally containing only a <code class=" language-php">handle</code> method which is called when the job is processed by the queue. To get started, let's take a look at an example job class. In this example, we'll pretend we manage a podcast publishing service and need to process the uploaded podcast files before they are published:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Jobs</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Podcast</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>AudioProcessor</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Bus<span class="token punctuation">\</span>Queueable</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>SerializesModels</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>InteractsWithQueue</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>ShouldQueue</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Bus<span class="token punctuation">\</span>Dispatchable</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ProcessPodcast</span> <span class="token keyword">implements</span> <span class="token class-name">ShouldQueue</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">Dispatchable</span><span class="token punctuation">,</span> InteractsWithQueue<span class="token punctuation">,</span> Queueable<span class="token punctuation">,</span> SerializesModels<span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token variable">$podcast</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * Create a new job instance.
     *
     * @param  Podcast  $podcast
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span>Podcast <span class="token variable">$podcast</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">podcast</span> <span class="token operator">=</span> <span class="token variable">$podcast</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Execute the job.
     *
     * @param  AudioProcessor  $processor
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span>AudioProcessor <span class="token variable">$processor</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Process uploaded podcast...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p>In this example, note that we were able to pass an <a href="https://laravel.com/docs/6.0/eloquent">Eloquent model</a> directly into the queued job's constructor. Because of the <code class=" language-php">SerializesModels</code> trait that the job is using, Eloquent models will be gracefully serialized and unserialized when the job is processing. If your queued job accepts an Eloquent model in its constructor, only the identifier for the model will be serialized onto the queue. When the job is actually handled, the queue system will automatically re-retrieve the full model instance from the database. It's all totally transparent to your application and prevents issues that can arise from serializing full Eloquent model instances.</p>
<p>The <code class=" language-php">handle</code> method is called when the job is processed by the queue. Note that we are able to type-hint dependencies on the <code class=" language-php">handle</code> method of the job. The Laravel <a href="https://laravel.com/docs/6.0/container">service container</a> automatically injects these dependencies.</p>
<p>If you would like to take total control over how the container injects dependencies into the <code class=" language-php">handle</code> method, you may use the container's <code class=" language-php">bindMethod</code> method. The <code class=" language-php">bindMethod</code> method accepts a callback which receives the job and the container. Within the callback, you are free to invoke the <code class=" language-php">handle</code> method however you wish. Typically, you should call this method from a <a href="https://laravel.com/docs/6.0/providers">service provider</a>:</p>
<pre class=" language-php"><code class=" language-php"><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Jobs<span class="token punctuation">\</span>ProcessPodcast</span><span class="token punctuation">;</span>

<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">app</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bindMethod</span><span class="token punctuation">(</span>ProcessPodcast<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'@handle'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$job</span><span class="token punctuation">,</span> <span class="token variable">$app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$job</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token variable">$app</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">make</span><span class="token punctuation">(</span>AudioProcessor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote>
<div class="callout"><div class="icon red"><img src="./11-Queues_files/exclamation.min.svg"></div><p class="content"> Binary data, such as raw image contents, should be passed through the <code class=" language-php">base64_encode</code> function before being passed to a queued job. Otherwise, the job may not properly serialize to JSON when being placed on the queue.</p></div>
</blockquote>
<p><a name="job-middleware"></a></p>
<h3><a href="#job-middleware">Job Middleware</a></h3>
<p>Job middleware allow you wrap custom logic around the execution of queued jobs, reducing boilerplate in the jobs themselves. For example, consider the following <code class=" language-php">handle</code> method which leverages Laravel's Redis rate limiting features to allow only one job to process every five seconds:</p>
<pre class=" language-php"><code class=" language-php"><span class="token comment">/**
 * Execute the job.
 *
 * @return void
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Redis<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allow</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Lock obtained...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Handle job...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Could not obtain lock...</span>

        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>While this code is valid, the structure of the <code class=" language-php">handle</code> method becomes noisy since it is cluttered with Redis rate limiting logic. In addition, this rate limiting logic must be duplicated for any other jobs that we want to rate limit.</p>
<p>Instead of rate limiting in the handle method, we could define a job middleware that handles rate limiting. Laravel does not have a default location for job middleware, so you are welcome to place job middleware anywhere in your application. In this example, we will place the middleware in a <code class=" language-php">app<span class="token operator">/</span>Jobs<span class="token operator">/</span>Middleware</code> directory:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Jobs<span class="token punctuation">\</span>Middleware</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Redis</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">RateLimited</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Process the queued job.
     *
     * @param  mixed  $job
     * @param  callable  $next
     * @return mixed
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token variable">$job</span><span class="token punctuation">,</span> <span class="token variable">$next</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Redis<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allow</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$job</span><span class="token punctuation">,</span> <span class="token variable">$next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// Lock obtained...</span>

                    <span class="token variable">$next</span><span class="token punctuation">(</span><span class="token variable">$job</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$job</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// Could not obtain lock...</span>

                    <span class="token variable">$job</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p>As you can see, like <a href="https://laravel.com/docs/6.0/middleware">route middleware</a>, job middleware receive the job being processed and a callback that should be invoked to continue processing the job.</p>
<p>After creating job middleware, they may be attached to a job by returning them from the job's <code class=" language-php">middleware</code> method. This method does not exist on jobs scaffolded by the <code class=" language-php">make<span class="token punctuation">:</span>job</code> Artisan command, so you will need to add it to your own job class definition:</p>
<pre class=" language-php"><code class=" language-php"><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Jobs<span class="token punctuation">\</span>Middleware<span class="token punctuation">\</span>RateLimited</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Get the middlewarwe the job should pass through.
 *
 * @return array
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">middleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">RateLimited</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p><a name="dispatching-jobs"></a></p>
<h2><a href="#dispatching-jobs">Dispatching Jobs</a></h2>
<p>Once you have written your job class, you may dispatch it using the <code class=" language-php">dispatch</code> method on the job itself. The arguments passed to the <code class=" language-php">dispatch</code> method will be given to the job's constructor:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Jobs<span class="token punctuation">\</span>ProcessPodcast</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">PodcastController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Store a new podcast.
     *
     * @param  Request  $request
     * @return Response
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Create podcast...</span>

        ProcessPodcast<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token variable">$podcast</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p><a name="delayed-dispatching"></a></p>
<h3><a href="#delayed-dispatching">Delayed Dispatching</a></h3>
<p>If you would like to delay the execution of a queued job, you may use the <code class=" language-php">delay</code> method when dispatching a job. For example, let's specify that a job should not be available for processing until 10 minutes after it has been dispatched:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Jobs<span class="token punctuation">\</span>ProcessPodcast</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">PodcastController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Store a new podcast.
     *
     * @param  Request  $request
     * @return Response
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Create podcast...</span>

        ProcessPodcast<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token variable">$podcast</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addMinutes</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<blockquote>
<div class="callout"><div class="icon red"><img src="./11-Queues_files/exclamation.min.svg"></div><p class="content"> The Amazon SQS queue service has a maximum delay time of 15 minutes.</p></div>
</blockquote>
<p><a name="synchronous-dispatching"></a></p>
<h3><a href="#synchronous-dispatching">Synchronous Dispatching</a></h3>
<p>If you would like to dispatch a job immediately (synchronously), you may use the <code class=" language-php">dispatchNow</code> method. When using this method, the job will not be queued and will be run immediately within the current process:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Jobs<span class="token punctuation">\</span>ProcessPodcast</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">PodcastController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Store a new podcast.
     *
     * @param  Request  $request
     * @return Response
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Create podcast...</span>

        ProcessPodcast<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatchNow</span><span class="token punctuation">(</span><span class="token variable">$podcast</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p><a name="job-chaining"></a></p>
<h3><a href="#job-chaining">Job Chaining</a></h3>
<p>Job chaining allows you to specify a list of queued jobs that should be run in sequence after the primary job has executed successfully. If one job in the sequence fails, the rest of the jobs will not be run. To execute a queued job chain, you may use the <code class=" language-php">withChain</code> method on any of your dispatchable jobs:</p>
<pre class=" language-php"><code class=" language-php">ProcessPodcast<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">withChain</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">OptimizePodcast</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">ReleasePodcast</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote>
<div class="callout"><div class="icon red"><img src="./11-Queues_files/exclamation.min.svg"></div><p class="content"> Deleting jobs using the <code class=" language-php"><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> method will not prevent chained jobs from being processed. The chain will only stop executing if a job in the chain fails.</p></div>
</blockquote>
<h4>Chain Connection &amp; Queue</h4>
<p>If you would like to specify the default connection and queue that should be used for the chained jobs, you may use the <code class=" language-php">allOnConnection</code> and <code class=" language-php">allOnQueue</code> methods. These methods specify the queue connection and queue name that should be used unless the queued job is explicitly assigned a different connection / queue:</p>
<pre class=" language-php"><code class=" language-php">ProcessPodcast<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">withChain</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">OptimizePodcast</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">ReleasePodcast</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allOnConnection</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'redis'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allOnQueue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'podcasts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><a name="customizing-the-queue-and-connection"></a></p>
<h3><a href="#customizing-the-queue-and-connection">Customizing The Queue &amp; Connection</a></h3>
<h4>Dispatching To A Particular Queue</h4>
<p>By pushing jobs to different queues, you may "categorize" your queued jobs and even prioritize how many workers you assign to various queues. Keep in mind, this does not push jobs to different queue "connections" as defined by your queue configuration file, but only to specific queues within a single connection. To specify the queue, use the <code class=" language-php">onQueue</code> method when dispatching the job:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Jobs<span class="token punctuation">\</span>ProcessPodcast</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">PodcastController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Store a new podcast.
     *
     * @param  Request  $request
     * @return Response
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Create podcast...</span>

        ProcessPodcast<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token variable">$podcast</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onQueue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'processing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<h4>Dispatching To A Particular Connection</h4>
<p>If you are working with multiple queue connections, you may specify which connection to push a job to. To specify the connection, use the <code class=" language-php">onConnection</code> method when dispatching the job:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Jobs<span class="token punctuation">\</span>ProcessPodcast</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">PodcastController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Store a new podcast.
     *
     * @param  Request  $request
     * @return Response
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Create podcast...</span>

        ProcessPodcast<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token variable">$podcast</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onConnection</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sqs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p>You may chain the <code class=" language-php">onConnection</code> and <code class=" language-php">onQueue</code> methods to specify the connection and the queue for a job:</p>
<pre class=" language-php"><code class=" language-php">ProcessPodcast<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token variable">$podcast</span><span class="token punctuation">)</span>
              <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onConnection</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sqs'</span><span class="token punctuation">)</span>
              <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onQueue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'processing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Alternatively, you may specify the <code class=" language-php">connection</code> as a property on the job class:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Jobs</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ProcessPodcast</span> <span class="token keyword">implements</span> <span class="token class-name">ShouldQueue</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The queue connection that should handle the job.
     *
     * @var string
     */</span>
    <span class="token keyword">public</span> <span class="token variable">$connection</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'sqs'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
<p><a name="max-job-attempts-and-timeout"></a></p>
<h3><a href="#max-job-attempts-and-timeout">Specifying Max Job Attempts / Timeout Values</a></h3>
<h4>Max Attempts</h4>
<p>One approach to specifying the maximum number of times a job may be attempted is via the <code class=" language-php"><span class="token operator">--</span>tries</code> switch on the Artisan command line:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work <span class="token operator">--</span>tries<span class="token operator">=</span><span class="token number">3</span></code></pre>
<p>However, you may take a more granular approach by defining the maximum number of attempts on the job class itself. If the maximum number of attempts is specified on the job, it will take precedence over the value provided on the command line:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Jobs</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ProcessPodcast</span> <span class="token keyword">implements</span> <span class="token class-name">ShouldQueue</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The number of times the job may be attempted.
     *
     * @var int
     */</span>
    <span class="token keyword">public</span> <span class="token variable">$tries</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
<p><a name="time-based-attempts"></a></p>
<h4><a href="#time-based-attempts">Time Based Attempts</a></h4>
<p>As an alternative to defining how many times a job may be attempted before it fails, you may define a time at which the job should timeout. This allows a job to be attempted any number of times within a given time frame. To define the time at which a job should timeout, add a <code class=" language-php">retryUntil</code> method to your job class:</p>
<pre class=" language-php"><code class=" language-php"><span class="token comment">/**
 * Determine the time at which the job should timeout.
 *
 * @return \DateTime
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">retryUntil</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addSeconds</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<blockquote>
<div class="callout"><div class="icon purple"><img src="./11-Queues_files/lightbulb.min.svg"></div><p class="content"> You may also define a <code class=" language-php">retryUntil</code> method on your queued event listeners.</p></div>
</blockquote>
<h4>Timeout</h4>
<blockquote>
<div class="callout"><div class="icon red"><img src="./11-Queues_files/exclamation.min.svg"></div><p class="content"> The <code class=" language-php">timeout</code> feature is optimized for PHP 7.1+ and the <code class=" language-php">pcntl</code> PHP extension.</p></div>
</blockquote>
<p>Likewise, the maximum number of seconds that jobs can run may be specified using the <code class=" language-php"><span class="token operator">--</span>timeout</code> switch on the Artisan command line:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work <span class="token operator">--</span>timeout<span class="token operator">=</span><span class="token number">30</span></code></pre>
<p>However, you may also define the maximum number of seconds a job should be allowed to run on the job class itself. If the timeout is specified on the job, it will take precedence over any timeout specified on the command line:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Jobs</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ProcessPodcast</span> <span class="token keyword">implements</span> <span class="token class-name">ShouldQueue</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The number of seconds the job can run before timing out.
     *
     * @var int
     */</span>
    <span class="token keyword">public</span> <span class="token variable">$timeout</span> <span class="token operator">=</span> <span class="token number">120</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
<p><a name="rate-limiting"></a></p>
<h3><a href="#rate-limiting">Rate Limiting</a></h3>
<blockquote>
<div class="callout"><div class="icon red"><img src="./11-Queues_files/exclamation.min.svg"></div><p class="content"> This feature requires that your application can interact with a <a href="https://laravel.com/docs/6.0/redis">Redis server</a>.</p></div>
</blockquote>
<p>If your application interacts with Redis, you may throttle your queued jobs by time or concurrency. This feature can be of assistance when your queued jobs are interacting with APIs that are also rate limited.</p>
<p>For example, using the <code class=" language-php">throttle</code> method, you may throttle a given type of job to only run 10 times every 60 seconds. If a lock can not be obtained, you should typically release the job back onto the queue so it can be retried later:</p>
<pre class=" language-php"><code class=" language-php">Redis<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Job logic...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Could not obtain lock...</span>

    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote>
<div class="callout"><div class="icon purple"><img src="./11-Queues_files/lightbulb.min.svg"></div><p class="content"> In the example above, the <code class=" language-php">key</code> may be any string that uniquely identifies the type of job you would like to rate limit. For example, you may wish to construct the key based on the class name of the job and the IDs of the Eloquent models it operates on.</p></div>
<div class="callout"><div class="icon red"><img src="./11-Queues_files/exclamation.min.svg"></div><p class="content">  Releasing a throttled job back onto the queue will still increment the job's total number of <code class=" language-php">attempts</code>.</p></div>
</blockquote>
<p>Alternatively, you may specify the maximum number of workers that may simultaneously process a given job. This can be helpful when a queued job is modifying a resource that should only be modified by one job at a time. For example, using the <code class=" language-php">funnel</code> method, you may limit jobs of a given type to only be processed by one worker at a time:</p>
<pre class=" language-php"><code class=" language-php">Redis<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">funnel</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Job logic...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Could not obtain lock...</span>

    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote>
<div class="callout"><div class="icon purple"><img src="./11-Queues_files/lightbulb.min.svg"></div><p class="content"> When using rate limiting, the number of attempts your job will need to run successfully can be hard to determine. Therefore, it is useful to combine rate limiting with <a href="#time-based-attempts">time based attempts</a>.</p></div>
</blockquote>
<p><a name="error-handling"></a></p>
<h3><a href="#error-handling">Error Handling</a></h3>
<p>If an exception is thrown while the job is being processed, the job will automatically be released back onto the queue so it may be attempted again. The job will continue to be released until it has been attempted the maximum number of times allowed by your application. The maximum number of attempts is defined by the <code class=" language-php"><span class="token operator">--</span>tries</code> switch used on the <code class=" language-php">queue<span class="token punctuation">:</span>work</code> Artisan command. Alternatively, the maximum number of attempts may be defined on the job class itself. More information on running the queue worker <a href="#running-the-queue-worker">can be found below</a>.</p>
<p><a name="queueing-closures"></a></p>
<h2><a href="#queueing-closures">Queueing Closures</a></h2>
<p>Instead of dispatching a job class to the queue, you may also dispatch a Closure. This is great for quick, simple tasks that need to be executed outside of the current request cycle:</p>
<pre class=" language-php"><code class=" language-php"><span class="token variable">$podcast</span> <span class="token operator">=</span> App\<span class="token package">Podcast</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$podcast</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$podcast</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>When dispatching Closures to the queue, the Closure's code contents is cryptographically signed so it can not be modified in transit.</p>
<p><a name="running-the-queue-worker"></a></p>
<h2><a href="#running-the-queue-worker">Running The Queue Worker</a></h2>
<p>Laravel includes a queue worker that will process new jobs as they are pushed onto the queue. You may run the worker using the <code class=" language-php">queue<span class="token punctuation">:</span>work</code> Artisan command. Note that once the <code class=" language-php">queue<span class="token punctuation">:</span>work</code> command has started, it will continue to run until it is manually stopped or you close your terminal:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work</code></pre>
<blockquote>
<div class="callout"><div class="icon purple"><img src="./11-Queues_files/lightbulb.min.svg"></div><p class="content"> To keep the <code class=" language-php">queue<span class="token punctuation">:</span>work</code> process running permanently in the background, you should use a process monitor such as <a href="#supervisor-configuration">Supervisor</a> to ensure that the queue worker does not stop running.</p></div>
</blockquote>
<p>Remember, queue workers are long-lived processes and store the booted application state in memory. As a result, they will not notice changes in your code base after they have been started. So, during your deployment process, be sure to <a href="#queue-workers-and-deployment">restart your queue workers</a>.</p>
<p>Alternatively, you may run the <code class=" language-php">queue<span class="token punctuation">:</span>listen</code> command. When using the <code class=" language-php">queue<span class="token punctuation">:</span>listen</code> command, you don't have to manually restart the worker after your code is changed; however, this command is not as efficient as <code class=" language-php">queue<span class="token punctuation">:</span>work</code>:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>listen</code></pre>
<h4>Specifying The Connection &amp; Queue</h4>
<p>You may also specify which queue connection the worker should utilize. The connection name passed to the <code class=" language-php">work</code> command should correspond to one of the connections defined in your <code class=" language-php">config<span class="token operator">/</span>queue<span class="token punctuation">.</span>php</code> configuration file:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work redis</code></pre>
<p>You may customize your queue worker even further by only processing particular queues for a given connection. For example, if all of your emails are processed in an <code class=" language-php">emails</code> queue on your <code class=" language-php">redis</code> queue connection, you may issue the following command to start a worker that only processes only that queue:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work redis <span class="token operator">--</span>queue<span class="token operator">=</span>emails</code></pre>
<h4>Processing A Single Job</h4>
<p>The <code class=" language-php"><span class="token operator">--</span>once</code> option may be used to instruct the worker to only process a single job from the queue:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work <span class="token operator">--</span>once</code></pre>
<h4>Processing All Queued Jobs &amp; Then Exiting</h4>
<p>The <code class=" language-php"><span class="token operator">--</span>stop<span class="token operator">-</span>when<span class="token operator">-</span><span class="token keyword">empty</span></code> option may be used to instruct the worker to process all jobs and then exit gracefully. This option can be useful when working Laravel queues within a Docker container if you wish to shutdown the container after the queue is empty:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work <span class="token operator">--</span>stop<span class="token operator">-</span>when<span class="token operator">-</span><span class="token keyword">empty</span></code></pre>
<h4>Resource Considerations</h4>
<p>Daemon queue workers do not "reboot" the framework before processing each job. Therefore, you should free any heavy resources after each job completes. For example, if you are doing image manipulation with the GD library, you should free the memory with <code class=" language-php">imagedestroy</code> when you are done.</p>
<p><a name="queue-priorities"></a></p>
<h3><a href="#queue-priorities">Queue Priorities</a></h3>
<p>Sometimes you may wish to prioritize how your queues are processed. For example, in your <code class=" language-php">config<span class="token operator">/</span>queue<span class="token punctuation">.</span>php</code> you may set the default <code class=" language-php">queue</code> for your <code class=" language-php">redis</code> connection to <code class=" language-php">low</code>. However, occasionally you may wish to push a job to a <code class=" language-php">high</code> priority queue like so:</p>
<pre class=" language-php"><code class=" language-php"><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Job</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onQueue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'high'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>To start a worker that verifies that all of the <code class=" language-php">high</code> queue jobs are processed before continuing to any jobs on the <code class=" language-php">low</code> queue, pass a comma-delimited list of queue names to the <code class=" language-php">work</code> command:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work <span class="token operator">--</span>queue<span class="token operator">=</span>high<span class="token punctuation">,</span>low</code></pre>
<p><a name="queue-workers-and-deployment"></a></p>
<h3><a href="#queue-workers-and-deployment">Queue Workers &amp; Deployment</a></h3>
<p>Since queue workers are long-lived processes, they will not pick up changes to your code without being restarted. So, the simplest way to deploy an application using queue workers is to restart the workers during your deployment process. You may gracefully restart all of the workers by issuing the <code class=" language-php">queue<span class="token punctuation">:</span>restart</code> command:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>restart</code></pre>
<p>This command will instruct all queue workers to gracefully "die" after they finish processing their current job so that no existing jobs are lost. Since the queue workers will die when the <code class=" language-php">queue<span class="token punctuation">:</span>restart</code> command is executed, you should be running a process manager such as <a href="#supervisor-configuration">Supervisor</a> to automatically restart the queue workers.</p>
<blockquote>
<div class="callout"><div class="icon purple"><img src="./11-Queues_files/lightbulb.min.svg"></div><p class="content"> The queue uses the <a href="https://laravel.com/docs/6.0/cache">cache</a> to store restart signals, so you should verify a cache driver is properly configured for your application before using this feature.</p></div>
</blockquote>
<p><a name="job-expirations-and-timeouts"></a></p>
<h3><a href="#job-expirations-and-timeouts">Job Expirations &amp; Timeouts</a></h3>
<h4>Job Expiration</h4>
<p>In your <code class=" language-php">config<span class="token operator">/</span>queue<span class="token punctuation">.</span>php</code> configuration file, each queue connection defines a <code class=" language-php">retry_after</code> option. This option specifies how many seconds the queue connection should wait before retrying a job that is being processed. For example, if the value of <code class=" language-php">retry_after</code> is set to <code class=" language-php"><span class="token number">90</span></code>, the job will be released back onto the queue if it has been processing for 90 seconds without being deleted. Typically, you should set the <code class=" language-php">retry_after</code> value to the maximum number of seconds your jobs should reasonably take to complete processing.</p>
<blockquote>
<div class="callout"><div class="icon red"><img src="./11-Queues_files/exclamation.min.svg"></div><p class="content"> The only queue connection which does not contain a <code class=" language-php">retry_after</code> value is Amazon SQS. SQS will retry the job based on the <a href="https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/AboutVT.html">Default Visibility Timeout</a> which is managed within the AWS console.</p></div>
</blockquote>
<h4>Worker Timeouts</h4>
<p>The <code class=" language-php">queue<span class="token punctuation">:</span>work</code> Artisan command exposes a <code class=" language-php"><span class="token operator">--</span>timeout</code> option. The <code class=" language-php"><span class="token operator">--</span>timeout</code> option specifies how long the Laravel queue master process will wait before killing off a child queue worker that is processing a job. Sometimes a child queue process can become "frozen" for various reasons, such as an external HTTP call that is not responding. The <code class=" language-php"><span class="token operator">--</span>timeout</code> option removes frozen processes that have exceeded that specified time limit:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work <span class="token operator">--</span>timeout<span class="token operator">=</span><span class="token number">60</span></code></pre>
<p>The <code class=" language-php">retry_after</code> configuration option and the <code class=" language-php"><span class="token operator">--</span>timeout</code> CLI option are different, but work together to ensure that jobs are not lost and that jobs are only successfully processed once.</p>
<blockquote>
<div class="callout"><div class="icon red"><img src="./11-Queues_files/exclamation.min.svg"></div><p class="content"> The <code class=" language-php"><span class="token operator">--</span>timeout</code> value should always be at least several seconds shorter than your <code class=" language-php">retry_after</code> configuration value. This will ensure that a worker processing a given job is always killed before the job is retried. If your <code class=" language-php"><span class="token operator">--</span>timeout</code> option is longer than your <code class=" language-php">retry_after</code> configuration value, your jobs may be processed twice.</p></div>
</blockquote>
<h4>Worker Sleep Duration</h4>
<p>When jobs are available on the queue, the worker will keep processing jobs with no delay in between them. However, the <code class=" language-php">sleep</code> option determines how long (in seconds) the worker will "sleep" if there are no new jobs available. While sleeping, the worker will not process any new jobs - the jobs will be processed after the worker wakes up again.</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work <span class="token operator">--</span>sleep<span class="token operator">=</span><span class="token number">3</span></code></pre>
<p><a name="supervisor-configuration"></a></p>
<h2><a href="#supervisor-configuration">Supervisor Configuration</a></h2>
<h4>Installing Supervisor</h4>
<p>Supervisor is a process monitor for the Linux operating system, and will automatically restart your <code class=" language-php">queue<span class="token punctuation">:</span>work</code> process if it fails. To install Supervisor on Ubuntu, you may use the following command:</p>
<pre class=" language-php"><code class=" language-php">sudo apt<span class="token operator">-</span>get install supervisor</code></pre>
<blockquote>
<div class="callout"><div class="icon purple"><img src="./11-Queues_files/lightbulb.min.svg"></div><p class="content"> If configuring Supervisor yourself sounds overwhelming, consider using <a href="https://forge.laravel.com/">Laravel Forge</a>, which will automatically install and configure Supervisor for your Laravel projects.</p></div>
</blockquote>
<h4>Configuring Supervisor</h4>
<p>Supervisor configuration files are typically stored in the <code class=" language-php"><span class="token operator">/</span>etc<span class="token operator">/</span>supervisor<span class="token operator">/</span>conf<span class="token punctuation">.</span>d</code> directory. Within this directory, you may create any number of configuration files that instruct supervisor how your processes should be monitored. For example, let's create a <code class=" language-php">laravel<span class="token operator">-</span>worker<span class="token punctuation">.</span>conf</code> file that starts and monitors a <code class=" language-php">queue<span class="token punctuation">:</span>work</code> process:</p>
<pre class=" language-php"><code class=" language-php"><span class="token punctuation">[</span>program<span class="token punctuation">:</span>laravel<span class="token operator">-</span>worker<span class="token punctuation">]</span>
process_name<span class="token operator">=</span><span class="token operator">%</span><span class="token punctuation">(</span>program_name<span class="token punctuation">)</span>s_<span class="token operator">%</span><span class="token punctuation">(</span>process_num<span class="token punctuation">)</span><span class="token number">02</span>d
command<span class="token operator">=</span>php <span class="token operator">/</span>home<span class="token operator">/</span>forge<span class="token operator">/</span>app<span class="token punctuation">.</span>com<span class="token operator">/</span>artisan queue<span class="token punctuation">:</span>work sqs <span class="token operator">--</span>sleep<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">--</span>tries<span class="token operator">=</span><span class="token number">3</span>
autostart<span class="token operator">=</span><span class="token boolean constant">true</span>
autorestart<span class="token operator">=</span><span class="token boolean constant">true</span>
user<span class="token operator">=</span>forge
numprocs<span class="token operator">=</span><span class="token number">8</span>
redirect_stderr<span class="token operator">=</span><span class="token boolean constant">true</span>
stdout_logfile<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>forge<span class="token operator">/</span>app<span class="token punctuation">.</span>com<span class="token operator">/</span>worker<span class="token punctuation">.</span>log</code></pre>
<p>In this example, the <code class=" language-php">numprocs</code> directive will instruct Supervisor to run 8 <code class=" language-php">queue<span class="token punctuation">:</span>work</code> processes and monitor all of them, automatically restarting them if they fail. You should change the <code class=" language-php">queue<span class="token punctuation">:</span>work sqs</code> portion of the <code class=" language-php">command</code> directive to reflect your desired queue connection.</p>
<h4>Starting Supervisor</h4>
<p>Once the configuration file has been created, you may update the Supervisor configuration and start the processes using the following commands:</p>
<pre class=" language-php"><code class=" language-php">sudo supervisorctl reread

sudo supervisorctl update

sudo supervisorctl start laravel<span class="token operator">-</span>worker<span class="token punctuation">:</span><span class="token operator">*</span></code></pre>
<p>For more information on Supervisor, consult the <a href="http://supervisord.org/index.html">Supervisor documentation</a>.</p>
<p><a name="dealing-with-failed-jobs"></a></p>
<h2><a href="#dealing-with-failed-jobs">Dealing With Failed Jobs</a></h2>
<p>Sometimes your queued jobs will fail. Don't worry, things don't always go as planned! Laravel includes a convenient way to specify the maximum number of times a job should be attempted. After a job has exceeded this amount of attempts, it will be inserted into the <code class=" language-php">failed_jobs</code> database table. To create a migration for the <code class=" language-php">failed_jobs</code> table, you may use the <code class=" language-php">queue<span class="token punctuation">:</span>failed<span class="token operator">-</span>table</code> command:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>failed<span class="token operator">-</span>table

php artisan migrate</code></pre>
<p>Then, when running your <a href="#running-the-queue-worker">queue worker</a>, you can specify the maximum number of times a job should be attempted using the <code class=" language-php"><span class="token operator">--</span>tries</code> switch on the <code class=" language-php">queue<span class="token punctuation">:</span>work</code> command. If you do not specify a value for the <code class=" language-php"><span class="token operator">--</span>tries</code> option, jobs will only be attempted once:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work redis <span class="token operator">--</span>tries<span class="token operator">=</span><span class="token number">3</span></code></pre>
<p>In addition, you may specify how many seconds Laravel should wait before retrying a job that has failed using the <code class=" language-php"><span class="token operator">--</span>delay</code> option. By default, a job is retried immediately:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>work redis <span class="token operator">--</span>tries<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">--</span>delay<span class="token operator">=</span><span class="token number">3</span></code></pre>
<p>If you would like to configure the failed job retry delay on a per-job basis, you may do so by defining a <code class=" language-php">retryAfter</code> property on your queued job class:</p>
<pre class=" language-php"><code class=" language-php"><span class="token comment">/**
 * The number of seconds to wait before retrying the job.
 *
 * @var int
 */</span>
<span class="token keyword">public</span> <span class="token variable">$retryAfter</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></code></pre>
<p><a name="cleaning-up-after-failed-jobs"></a></p>
<h3><a href="#cleaning-up-after-failed-jobs">Cleaning Up After Failed Jobs</a></h3>
<p>You may define a <code class=" language-php">failed</code> method directly on your job class, allowing you to perform job specific clean-up when a failure occurs. This is the perfect location to send an alert to your users or revert any actions performed by the job. The <code class=" language-php">Exception</code> that caused the job to fail will be passed to the <code class=" language-php">failed</code> method:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Jobs</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Exception</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Podcast</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>AudioProcessor</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Bus<span class="token punctuation">\</span>Queueable</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>SerializesModels</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>InteractsWithQueue</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>ShouldQueue</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ProcessPodcast</span> <span class="token keyword">implements</span> <span class="token class-name">ShouldQueue</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">InteractsWithQueue</span><span class="token punctuation">,</span> Queueable<span class="token punctuation">,</span> SerializesModels<span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token variable">$podcast</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * Create a new job instance.
     *
     * @param  Podcast  $podcast
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span>Podcast <span class="token variable">$podcast</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">podcast</span> <span class="token operator">=</span> <span class="token variable">$podcast</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Execute the job.
     *
     * @param  AudioProcessor  $processor
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span>AudioProcessor <span class="token variable">$processor</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Process uploaded podcast...</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * The job failed to process.
     *
     * @param  Exception  $exception
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">failed</span><span class="token punctuation">(</span>Exception <span class="token variable">$exception</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Send user notification of failure, etc...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p><a name="failed-job-events"></a></p>
<h3><a href="#failed-job-events">Failed Job Events</a></h3>
<p>If you would like to register an event that will be called when a job fails, you may use the <code class=" language-php">Queue<span class="token punctuation">:</span><span class="token punctuation">:</span>failing</code> method. This event is a great opportunity to notify your team via email or <a href="https://www.slack.com/">Slack</a>. For example, we may attach a callback to this event from the <code class=" language-php">AppServiceProvider</code> that is included with Laravel:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Queue</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>Events<span class="token punctuation">\</span>JobFailed</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>ServiceProvider</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AppServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Register any application services.
     *
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Bootstrap any application services.
     *
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Queue<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">failing</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>JobFailed <span class="token variable">$event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// $event-&gt;connectionName</span>
            <span class="token comment">// $event-&gt;job</span>
            <span class="token comment">// $event-&gt;exception</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p><a name="retrying-failed-jobs"></a></p>
<h3><a href="#retrying-failed-jobs">Retrying Failed Jobs</a></h3>
<p>To view all of your failed jobs that have been inserted into your <code class=" language-php">failed_jobs</code> database table, you may use the <code class=" language-php">queue<span class="token punctuation">:</span>failed</code> Artisan command:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>failed</code></pre>
<p>The <code class=" language-php">queue<span class="token punctuation">:</span>failed</code> command will list the job ID, connection, queue, and failure time. The job ID may be used to retry the failed job. For instance, to retry a failed job that has an ID of <code class=" language-php"><span class="token number">5</span></code>, issue the following command:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>retry <span class="token number">5</span></code></pre>
<p>To retry all of your failed jobs, execute the <code class=" language-php">queue<span class="token punctuation">:</span>retry</code> command and pass <code class=" language-php">all</code> as the ID:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>retry all</code></pre>
<p>If you would like to delete a failed job, you may use the <code class=" language-php">queue<span class="token punctuation">:</span>forget</code> command:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>forget <span class="token number">5</span></code></pre>
<p>To delete all of your failed jobs, you may use the <code class=" language-php">queue<span class="token punctuation">:</span>flush</code> command:</p>
<pre class=" language-php"><code class=" language-php">php artisan queue<span class="token punctuation">:</span>flush</code></pre>
<p><a name="ignoring-missing-models"></a></p>
<h3><a href="#ignoring-missing-models">Ignoring Missing Models</a></h3>
<p>When injecting an Eloquent model into a job, it is automatically serialized before being placed on the queue and restored when the job is processed. However, if the model has been deleted while the job was waiting to be processed by a worker, your job may fail with a <code class=" language-php">ModelNotFoundException</code>.</p>
<p>For convenience, you may choose to automatically delete jobs with missing models by setting your job's <code class=" language-php">deleteWhenMissingModels</code> property to <code class=" language-php"><span class="token boolean constant">true</span></code>:</p>
<pre class=" language-php"><code class=" language-php"><span class="token comment">/**
 * Delete the job if its models no longer exist.
 *
 * @var bool
 */</span>
<span class="token keyword">public</span> <span class="token variable">$deleteWhenMissingModels</span> <span class="token operator">=</span> <span class="token boolean constant">true</span><span class="token punctuation">;</span></code></pre>
<p><a name="job-events"></a></p>
<h2><a href="#job-events">Job Events</a></h2>
<p>Using the <code class=" language-php">before</code> and <code class=" language-php">after</code> methods on the <code class=" language-php">Queue</code> <a href="https://laravel.com/docs/6.0/facades">facade</a>, you may specify callbacks to be executed before or after a queued job is processed. These callbacks are a great opportunity to perform additional logging or increment statistics for a dashboard. Typically, you should call these methods from a <a href="https://laravel.com/docs/6.0/providers">service provider</a>. For example, we may use the <code class=" language-php">AppServiceProvider</code> that is included with Laravel:</p>
<pre class=" language-php"><code class=" language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Queue</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>ServiceProvider</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>Events<span class="token punctuation">\</span>JobProcessed</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>Events<span class="token punctuation">\</span>JobProcessing</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AppServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Register any application services.
     *
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Bootstrap any application services.
     *
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Queue<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>JobProcessing <span class="token variable">$event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// $event-&gt;connectionName</span>
            <span class="token comment">// $event-&gt;job</span>
            <span class="token comment">// $event-&gt;job-&gt;payload()</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Queue<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>JobProcessed <span class="token variable">$event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// $event-&gt;connectionName</span>
            <span class="token comment">// $event-&gt;job</span>
            <span class="token comment">// $event-&gt;job-&gt;payload()</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
<p>Using the <code class=" language-php">looping</code> method on the <code class=" language-php">Queue</code> <a href="https://laravel.com/docs/6.0/facades">facade</a>, you may specify callbacks that execute before the worker attempts to fetch a job from a queue. For example, you might register a Closure to rollback any transactions that were left open by a previously failed job:</p>
<pre class=" language-php"><code class=" language-php">Queue<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">looping</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">transactionLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">rollBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        </section>
                    </section>
                </section>
            </div>
        </div>

    </div>


<script src="./11-Queues_files/app.js.download"></script>


</body></html>